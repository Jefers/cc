<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Happy Days</title>
  <style>
    :root{
      --bg: linear-gradient(180deg,#fffaf0 0%, #fff3e8 50%, #f7fff6 100%);
      --card:#ffffff;
      --muted:#6b6b6b;
      --accent1:#ff8a65; /* warm coral */
      --accent2:#ffd54f; /* sunny */
      --accent3:#66d9b8; /* mint */
      --radius: 18px;
      --shadow: 0 6px 20px rgba(16,24,40,0.08);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    html,body{height:100%;margin:0;background:var(--bg);color:#111}
    .app{min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:env(safe-area-inset-top) 16px 24px;gap:14px}

    header{width:100%;max-width:520px;display:flex;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:20px;letter-spacing:-0.2px}
    .subtitle{font-size:12px;color:var(--muted)}

    main{width:100%;max-width:520px;display:grid;grid-template-columns:1fr;gap:12px}

    .card{background:var(--card);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}

    .section-title{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .section-title h2{margin:0;font-size:14px}
    .small{font-size:12px;color:var(--muted)}

    .tasks{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    .task{display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;background:rgba(250,250,250,0.8)}
    .task label{display:flex;align-items:center;gap:10px;flex:1;cursor:pointer}
    .task input[type="checkbox"]{appearance:none;width:22px;height:22px;border-radius:6px;border:2px solid rgba(0,0,0,0.15);display:grid;place-items:center;transition:all .18s}
    .task input[type="checkbox"]:checked{background:linear-gradient(135deg,var(--accent1),var(--accent3));border:0;color:white}
    .task input[type="checkbox"]:checked::after{content:'✓';font-weight:700}
    .task .title{font-size:15px}

    .add-row{display:flex;gap:8px;margin-top:8px}
    .add-row input{flex:1;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,0.06);font-size:15px}
    .add-row button{padding:10px 12px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent1),var(--accent3));color:white;font-weight:700;cursor:pointer}

    .progress{margin-top:12px;font-size:14px}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>Happy Days</h1>
        <div class="subtitle">Alignment • Contentment • Control</div>
      </div>
    </header>

    <main>
      <section class="card">
        <div class="section-title">
          <h2>Progress</h2>
          <div class="small" id="progress-text">0 / 0 tasks</div>
        </div>
        <div class="progress" id="progress-bar">0%</div>
      </section>

      <section class="card">
        <div class="section-title"><h2>Alignment</h2></div>
        <div class="tasks" id="align-list"></div>
        <div class="add-row">
          <input id="align-input" placeholder="Add alignment habit" />
          <button id="align-add">Add</button>
        </div>
      </section>

      <section class="card">
        <div class="section-title"><h2>Contentment</h2></div>
        <div class="tasks" id="content-list"></div>
        <div class="add-row">
          <input id="content-input" placeholder="Add calming activity" />
          <button id="content-add">Add</button>
        </div>
      </section>

      <section class="card">
        <div class="section-title"><h2>Control</h2></div>
        <div class="tasks" id="control-list"></div>
        <div class="add-row">
          <input id="control-input" placeholder="Add inner practice" />
          <button id="control-add">Add</button>
        </div>
      </section>
    </main>
  </div>

  <script>
    const STORAGE_KEY = 'happy-days-data';
    let state = {alignment:[], contentment:[], control:[], checks:{}};

    function save(){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    function load(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if(raw) state = JSON.parse(raw);
    }

    function genId(){ return Math.random().toString(36).substr(2,9); }

    function addTask(listKey, inputEl){
      const val = inputEl.value.trim();
      if(!val) return;
      state[listKey].push({id:genId(), title:val});
      inputEl.value='';
      save();
      render();
    }

    function toggleCheck(id, checked){
      if(checked) state.checks[id]=true; else delete state.checks[id];
      save();
      updateProgress();
    }

    function render(){
      ['alignment','contentment','control'].forEach(key=>{
        const container = document.getElementById(key+'-list');
        container.innerHTML='';
        state[key].forEach(item=>{
          const div=document.createElement('div');
          div.className='task';
          const label=document.createElement('label');
          const cb=document.createElement('input');
          cb.type='checkbox';
          cb.checked=!!state.checks[item.id];
          cb.addEventListener('change', ()=>toggleCheck(item.id,cb.checked));
          const span=document.createElement('span');
          span.className='title';
          span.textContent=item.title;
          label.appendChild(cb);
          label.appendChild(span);
          div.appendChild(label);
          container.appendChild(div);
        });
      });
      updateProgress();
    }

    function updateProgress(){
      const allTasks=[...state.alignment,...state.contentment,...state.control];
      const total=allTasks.length;
      const done=allTasks.filter(t=>state.checks[t.id]).length;
      document.getElementById('progress-text').textContent=`${done} / ${total} tasks`;
      document.getElementById('progress-bar').textContent = total? Math.round(done/total*100)+"%": "0%";
    }

    function bind(){
      document.getElementById('align-add').onclick=()=>addTask('alignment',document.getElementById('align-input'));
      document.getElementById('content-add').onclick=()=>addTask('contentment',document.getElementById('content-input'));
      document.getElementById('control-add').onclick=()=>addTask('control',document.getElementById('control-input'));
    }

    load();
    bind();
    render();
  </script>
</body>
</html>
