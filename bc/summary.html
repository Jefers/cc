<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bullion Summary</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 10px;
            background-color: #fff;
            color: #000;
        }
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        .nav-tab {
            padding: 10px 20px;
            margin: 0 5px;
            background-color: #F5F0FF; /* Pale Purple for Summary */
            border: 1px solid #ddd;
            border-radius: 10px 10px 0 0;
            text-decoration: none;
            color: #000;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }
        .nav-tab:hover {
            background-color: #E6DFFF; /* Slightly darker purple */
        }
        .nav-tab.active {
            background-color: #D8CCFF; /* Darker shade for active */
            border-bottom: 2px solid #000;
            font-weight: bold;
        }
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }
        .row {
            display: flex;
            margin-bottom: 10px;
        }
        .cell {
            flex: 0 0 100px;
            border: 1px solid #000;
            padding: 5px;
            text-align: center;
            font-size: 1.2em;
            box-sizing: border-box;
        }
        .figure {
            color: #ff0000; /* Red font for original balance figures */
        }
        .indentFigure {
            color: #000; /* Black font for indent figures */
        }
        .deliveryFigure {
            color: #008000; /* Green font for delivery figures */
        }
        .denomination {
            color: #0000FF; /* Blue font for denomination labels */
        }
        .apple-button {
            display: inline-block;
            padding: 8px 16px;
            margin-top: 10px;
            font-size: 1.2em;
            color: #007AFF;
            background-color: #fff;
            border: 1px solid #007AFF;
            border-radius: 10px;
            text-decoration: none;
            text-align: center;
            transition: background-color 0.3s;
        }
        .apple-button:hover {
            background-color: #E5E5EA;
            color: #005BB5;
        }
        @media (min-width: 600px) {
            .container {
                max-width: 900px;
            }
            .cell {
                font-size: 1.4em;
            }
            .nav-tab {
                font-size: 1.4em;
            }
            .apple-button {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="nav-tabs">
        <a href="index.html" class="nav-tab" style="background-color: #FFF9E6;">Bullion</a> <!-- Pale Yellow -->
        <a href="delivery.html" class="nav-tab" style="background-color: #FFF0F0;">Delivery</a> <!-- Pale Red -->
        <a href="indents.html" class="nav-tab" style="background-color: #F0FFF0;">Indents</a> <!-- Pale Green -->
        <a href="summary.html" class="nav-tab active">Summary</a>
    </div>
    <div class="container">
        <div class="row">
            <div class="cell denomination">£20</div>
            <div class="cell denomination">£10</div>
            <div class="cell denomination">£5</div>
            <div class="cell denomination">£2</div>
            <div class="cell denomination">£1</div>
            <div class="cell denomination">50p</div>
            <div class="cell denomination">20p</div>
            <div class="cell denomination">10p</div>
            <div class="cell denomination">5p</div>
            <div class="cell denomination">2p</div>
            <div class="cell denomination">1p</div>
            <div class="cell">Totals</div>
        </div>

        <div class="row" id="totalsRow">
            <div class="cell"><span class="figure" id="total20">0</span></div>
            <div class="cell"><span class="figure" id="total10">0</span></div>
            <div class="cell"><span class="figure" id="total5">0</span></div>
            <div class="cell"><span class="figure" id="total2">0</span></div>
            <div class="cell"><span class="figure" id="total1">0</span></div>
            <div class="cell"><span class="figure" id="total50p">0</span></div>
            <div class="cell"><span class="figure" id="total20p">0</span></div>
            <div class="cell"><span class="figure" id="total10p">0</span></div>
            <div class="cell"><span class="figure" id="total5p">0</span></div>
            <div class="cell"><span class="figure" id="total2p">0</span></div>
            <div class="cell"><span class="figure" id="total1p">0</span></div>
            <div class="cell"><span class="figure" id="grandTotal">0</span></div>
        </div>

        <div class="row">
            <div class="cell"><span class="indentFigure" id="indent1_20">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_10">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_5">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_2">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_1">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_50p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_20p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_10p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_5p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_2p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_1p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_total">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent1_section"></span></div>
        </div>
        <div class="row">
            <div class="cell"><span class="indentFigure" id="indent2_20">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_10">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_5">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_2">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_1">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_50p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_20p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_10p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_5p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_2p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_1p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_total">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent2_section"></span></div>
        </div>
        <div class="row">
            <div class="cell"><span class="indentFigure" id="indent3_20">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_10">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_5">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_2">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_1">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_50p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_20p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_10p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_5p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_2p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_1p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_total">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent3_section"></span></div>
        </div>
        <div class="row">
            <div class="cell"><span class="indentFigure" id="indent4_20">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_10">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_5">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_2">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_1">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_50p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_20p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_10p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_5p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_2p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_1p">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_total">0</span></div>
            <div class="cell"><span class="indentFigure" id="indent4_section"></span></div>
        </div>

        <div class="row">
            <div class="cell"><span class="deliveryFigure" id="delivery_20">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_10">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_5">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb2">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb1">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb50p">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb20p">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb10p">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb5p">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb2p">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_lb1p">0</span></div>
            <div class="cell"><span class="deliveryFigure" id="delivery_total">0</span></div>
        </div>

        <div class="row">
            <div class="cell"><span class="figure" id="new_bal_20">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_10">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_5">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_2">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_1">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_50p">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_20p">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_10p">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_5p">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_2p">0</span></div>
            <div class="cell"><span class="figure" id="new_bal_1p">0</span></div>
            <div class="cell"><span class="figure" id="newGrandTotal">0</span></div>
        </div>

        <a href="index.html" class="apple-button">Bullion Count</a>
        <a href="indents.html" class="apple-button">Edit Indents</a>
        <a href="delivery.html" class="apple-button">Edit Delivery</a>
        <!-- NEW: Reset Button -->
        <button class="apple-button" onclick="resetData()">Reset</button>
    </div>

    <script>
        function loadTotals() {
            document.getElementById('total20').textContent = (parseInt(localStorage.getItem('n20') || 0) * 20) || 0;
            document.getElementById('total10').textContent = (parseInt(localStorage.getItem('n10') || 0) * 10) || 0;
            document.getElementById('total5').textContent = (parseInt(localStorage.getItem('n5') || 0) * 5) || 0;
            document.getElementById('total2').textContent = (parseInt(localStorage.getItem('lb2') || 0) * 500 + parseInt(localStorage.getItem('sb2') || 0) * 20) || 0;
            document.getElementById('total1').textContent = (parseInt(localStorage.getItem('lb1') || 0) * 500 + parseInt(localStorage.getItem('sb1') || 0) * 20) || 0;
            document.getElementById('total50p').textContent = (parseInt(localStorage.getItem('lb50p') || 0) * 250 + parseInt(localStorage.getItem('sb50p') || 0) * 10) || 0;
            document.getElementById('total20p').textContent = (parseInt(localStorage.getItem('lb20p') || 0) * 250 + parseInt(localStorage.getItem('sb20p') || 0) * 10) || 0;
            document.getElementById('total10p').textContent = (parseInt(localStorage.getItem('lb10p') || 0) * 100 + parseInt(localStorage.getItem('sb10p') || 0) * 5) || 0;
            document.getElementById('total5p').textContent = (parseInt(localStorage.getItem('lb5p') || 0) * 100 + parseInt(localStorage.getItem('sb5p') || 0) * 5) || 0;
            document.getElementById('total2p').textContent = (parseInt(localStorage.getItem('lb2p') || 0) * 20 + parseInt(localStorage.getItem('sb2p') || 0) * 1) || 0;
            document.getElementById('total1p').textContent = (parseInt(localStorage.getItem('lb1p') || 0) * 20 + parseInt(localStorage.getItem('sb1p') || 0) * 1) || 0;

            let grandTotal = parseInt(document.getElementById('total20').textContent) +
                            parseInt(document.getElementById('total10').textContent) +
                            parseInt(document.getElementById('total5').textContent) +
                            parseInt(document.getElementById('total2').textContent) +
                            parseInt(document.getElementById('total1').textContent) +
                            parseInt(document.getElementById('total50p').textContent) +
                            parseInt(document.getElementById('total20p').textContent) +
                            parseInt(document.getElementById('total10p').textContent) +
                            parseInt(document.getElementById('total5p').textContent) +
                            parseInt(document.getElementById('total2p').textContent) +
                            parseInt(document.getElementById('total1p').textContent);
            document.getElementById('grandTotal').textContent = grandTotal || 0;
        }

        function loadIndents() {
            document.getElementById('indent1_section').textContent = localStorage.getItem('indent_c1_section') || '';
            document.getElementById('indent1_20').textContent = localStorage.getItem('indent_c1_20') || 0;
            document.getElementById('indent1_10').textContent = localStorage.getItem('indent_c1_10') || 0;
            document.getElementById('indent1_5').textContent = localStorage.getItem('indent_c1_5') || 0;
            document.getElementById('indent1_2').textContent = localStorage.getItem('indent_c1_2') || 0;
            document.getElementById('indent1_1').textContent = localStorage.getItem('indent_c1_1') || 0;
            document.getElementById('indent1_50p').textContent = localStorage.getItem('indent_c1_50p') || 0;
            document.getElementById('indent1_20p').textContent = localStorage.getItem('indent_c1_20p') || 0;
            document.getElementById('indent1_10p').textContent = localStorage.getItem('indent_c1_10p') || 0;
            document.getElementById('indent1_5p').textContent = localStorage.getItem('indent_c1_5p') || 0;
            document.getElementById('indent1_2p').textContent = localStorage.getItem('indent_c1_2p') || 0;

            let indent1Total = parseInt(document.getElementById('indent1_20').textContent) +
                              parseInt(document.getElementById('indent1_10').textContent) +
                              parseInt(document.getElementById('indent1_5').textContent) +
                              parseInt(document.getElementById('indent1_2').textContent) +
                              parseInt(document.getElementById('indent1_1').textContent) +
                              parseInt(document.getElementById('indent1_50p').textContent) +
                              parseInt(document.getElementById('indent1_20p').textContent) +
                              parseInt(document.getElementById('indent1_10p').textContent) +
                              parseInt(document.getElementById('indent1_5p').textContent) +
                              parseInt(document.getElementById('indent1_2p').textContent) +
                              parseInt(document.getElementById('indent1_1p').textContent);
            document.getElementById('indent1_total').textContent = indent1Total || 0;

            document.getElementById('indent2_section').textContent = localStorage.getItem('indent_c2_section') || '';
            document.getElementById('indent2_20').textContent = localStorage.getItem('indent_c2_20') || 0;
            document.getElementById('indent2_10').textContent = localStorage.getItem('indent_c2_10') || 0;
            document.getElementById('indent2_5').textContent = localStorage.getItem('indent_c2_5') || 0;
            document.getElementById('indent2_2').textContent = localStorage.getItem('indent_c2_2') || 0;
            document.getElementById('indent2_1').textContent = localStorage.getItem('indent_c2_1') || 0;
            document.getElementById('indent2_50p').textContent = localStorage.getItem('indent_c2_50p') || 0;
            document.getElementById('indent2_20p').textContent = localStorage.getItem('indent_c2_20p') || 0;
            document.getElementById('indent2_10p').textContent = localStorage.getItem('indent_c2_10p') || 0;
            document.getElementById('indent2_5p').textContent = localStorage.getItem('indent_c2_5p') || 0;
            document.getElementById('indent2_2p').textContent = localStorage.getItem('indent_c2_2p') || 0;
            document.getElementById('indent2_1p').textContent = localStorage.getItem('indent_c2_1p') || 0;

            let indent2Total = parseInt(document.getElementById('indent2_20').textContent) +
                              parseInt(document.getElementById('indent2_10').textContent) +
                              parseInt(document.getElementById('indent2_5').textContent) +
                              parseInt(document.getElementById('indent2_2').textContent) +
                              parseInt(document.getElementById('indent2_1').textContent) +
                              parseInt(document.getElementById('indent2_50p').textContent) +
                              parseInt(document.getElementById('indent2_20p').textContent) +
                              parseInt(document.getElementById('indent2_10p').textContent) +
                              parseInt(document.getElementById('indent2_5p').textContent) +
                              parseInt(document.getElementById('indent2_2p').textContent) +
                              parseInt(document.getElementById('indent2_1p').textContent);
            document.getElementById('indent2_total').textContent = indent2Total || 0;

            document.getElementById('indent3_section').textContent = localStorage.getItem('indent_c3_section') || '';
            document.getElementById('indent3_20').textContent = localStorage.getItem('indent_c3_20') || 0;
            document.getElementById('indent3_10').textContent = localStorage.getItem('indent_c3_10') || 0;
            document.getElementById('indent3_5').textContent = localStorage.getItem('indent_c3_5') || 0;
            document.getElementById('indent3_2').textContent = localStorage.getItem('indent_c3_2') || 0;
            document.getElementById('indent3_1').textContent = localStorage.getItem('indent_c3_1') || 0;
            document.getElementById('indent3_50p').textContent = localStorage.getItem('indent_c3_50p') || 0;
            document.getElementById('indent3_20p').textContent = localStorage.getItem('indent_c3_20p') || 0;
            document.getElementById('indent3_10p').textContent = localStorage.getItem('indent_c3_10p') || 0;
            document.getElementById('indent3_5p').textContent = localStorage.getItem('indent_c3_5p') || 0;
            document.getElementById('indent3_2p').textContent = localStorage.getItem('indent_c3_2p') || 0;
            document.getElementById('indent3_1p').textContent = localStorage.getItem('indent_c3_1p') || 0;

            let indent3Total = parseInt(document.getElementById('indent3_20').textContent) +
                              parseInt(document.getElementById('indent3_10').textContent) +
                              parseInt(document.getElementById('indent3_5').textContent) +
                              parseInt(document.getElementById('indent3_2').textContent) +
                              parseInt(document.getElementById('indent3_1').textContent) +
                              parseInt(document.getElementById('indent3_50p').textContent) +
                              parseInt(document.getElementById('indent3_20p').textContent) +
                              parseInt(document.getElementById('indent3_10p').textContent) +
                              parseInt(document.getElementById('indent3_5p').textContent) +
                              parseInt(document.getElementById('indent3_2p').textContent) +
                              parseInt(document.getElementById('indent3_1p').textContent);
            document.getElementById('indent3_total').textContent = indent3Total || 0;

            document.getElementById('indent4_section').textContent = localStorage.getItem('indent_c4_section') || '';
            document.getElementById('indent4_20').textContent = localStorage.getItem('indent_c4_20') || 0;
            document.getElementById('indent4_10').textContent = localStorage.getItem('indent_c4_10') || 0;
            document.getElementById('indent4_5').textContent = localStorage.getItem('indent_c4_5') || 0;
            document.getElementById('indent4_2').textContent = localStorage.getItem('indent_c4_2') || 0;
            document.getElementById('indent4_1').textContent = localStorage.getItem('indent_c4_1') || 0;
            document.getElementById('indent4_50p').textContent = localStorage.getItem('indent_c4_50p') || 0;
            document.getElementById('indent4_20p').textContent = localStorage.getItem('indent_c4_20p') || 0;
            document.getElementById('indent4_10p').textContent = localStorage.getItem('indent_c4_10p') || 0;
            document.getElementById('indent4_5p').textContent = localStorage.getItem('indent_c4_5p') || 0;
            document.getElementById('indent4_2p').textContent = localStorage.getItem('indent_c4_2p') || 0;
            document.getElementById('indent4_1p').textContent = localStorage.getItem('indent_c4_1p') || 0;

            let indent4Total = parseInt(document.getElementById('indent4_20').textContent) +
                              parseInt(document.getElementById('indent4_10').textContent) +
                              parseInt(document.getElementById('indent4_5').textContent) +
                              parseInt(document.getElementById('indent4_2').textContent) +
                              parseInt(document.getElementById('indent4_1').textContent) +
                              parseInt(document.getElementById('indent4_50p').textContent) +
                              parseInt(document.getElementById('indent4_20p').textContent) +
                              parseInt(document.getElementById('indent4_10p').textContent) +
                              parseInt(document.getElementById('indent4_5p').textContent) +
                              parseInt(document.getElementById('indent4_2p').textContent) +
                              parseInt(document.getElementById('indent4_1p').textContent);
            document.getElementById('indent4_total').textContent = indent4Total || 0;
        }

        function loadDelivery() {
            document.getElementById('delivery_20').textContent = localStorage.getItem('delivery_20') || 0;
            document.getElementById('delivery_10').textContent = localStorage.getItem('delivery_10') || 0;
            document.getElementById('delivery_5').textContent = localStorage.getItem('delivery_5') || 0;
            document.getElementById('delivery_lb2').textContent = (parseInt(localStorage.getItem('delivery_lb2') || 0) * 500) || 0;
            document.getElementById('delivery_lb1').textContent = (parseInt(localStorage.getItem('delivery_lb1') || 0) * 500) || 0;
            document.getElementById('delivery_lb50p').textContent = (parseInt(localStorage.getItem('delivery_lb50p') || 0) * 250) || 0;
            document.getElementById('delivery_lb20p').textContent = (parseInt(localStorage.getItem('delivery_lb20p') || 0) * 250) || 0;
            document.getElementById('delivery_lb10p').textContent = (parseInt(localStorage.getItem('delivery_lb10p') || 0) * 100) || 0;
            document.getElementById('delivery_lb5p').textContent = (parseInt(localStorage.getItem('delivery_lb5p') || 0) * 100) || 0;
            document.getElementById('delivery_lb2p').textContent = (parseInt(localStorage.getItem('delivery_lb2p') || 0) * 20) || 0;
            document.getElementById('delivery_lb1p').textContent = (parseInt(localStorage.getItem('delivery_lb1p') || 0) * 20) || 0;

            let deliveryTotal = parseInt(document.getElementById('delivery_20').textContent) +
                               parseInt(document.getElementById('delivery_10').textContent) +
                               parseInt(document.getElementById('delivery_5').textContent) +
                               parseInt(document.getElementById('delivery_lb2').textContent) +
                               parseInt(document.getElementById('delivery_lb1').textContent) +
                               parseInt(document.getElementById('delivery_lb50p').textContent) +
                               parseInt(document.getElementById('delivery_lb20p').textContent) +
                               parseInt(document.getElementById('delivery_lb10p').textContent) +
                               parseInt(document.getElementById('delivery_lb5p').textContent) +
                               parseInt(document.getElementById('delivery_lb2p').textContent) +
                               parseInt(document.getElementById('delivery_lb1p').textContent);
            document.getElementById('delivery_total').textContent = deliveryTotal || 0;
        }

        function loadNewBalance() {
            document.getElementById('new_bal_20').textContent = parseInt(document.getElementById('total20').textContent) +
                                                              parseInt(document.getElementById('delivery_20').textContent) -
                                                              (parseInt(localStorage.getItem('indent_c1_20') || 0) +
                                                               parseInt(localStorage.getItem('indent_c2_20') || 0) +
                                                               parseInt(localStorage.getItem('indent_c3_20') || 0) +
                                                               parseInt(localStorage.getItem('indent_c4_20') || 0));
            document.getElementById('new_bal_10').textContent = parseInt(document.getElementById('total10').textContent) +
                                                              parseInt(document.getElementById('delivery_10').textContent) -
                                                              (parseInt(localStorage.getItem('indent_c1_10') || 0) +
                                                               parseInt(localStorage.getItem('indent_c2_10') || 0) +
                                                               parseInt(localStorage.getItem('indent_c3_10') || 0) +
                                                               parseInt(localStorage.getItem('indent_c4_10') || 0));
            document.getElementById('new_bal_5').textContent = parseInt(document.getElementById('total5').textContent) +
                                                             parseInt(document.getElementById('delivery_5').textContent) -
                                                             (parseInt(localStorage.getItem('indent_c1_5') || 0) +
                                                              parseInt(localStorage.getItem('indent_c2_5') || 0) +
                                                              parseInt(localStorage.getItem('indent_c3_5') || 0) +
                                                              parseInt(localStorage.getItem('indent_c4_5') || 0));
            document.getElementById('new_bal_2').textContent = parseInt(document.getElementById('total2').textContent) +
                                                             parseInt(document.getElementById('delivery_lb2').textContent) -
                                                             (parseInt(localStorage.getItem('indent_c1_2') || 0) +
                                                              parseInt(localStorage.getItem('indent_c2_2') || 0) +
                                                              parseInt(localStorage.getItem('indent_c3_2') || 0) +
                                                              parseInt(localStorage.getItem('indent_c4_2') || 0));
            document.getElementById('new_bal_1').textContent = parseInt(document.getElementById('total1').textContent) +
                                                             parseInt(document.getElementById('delivery_lb1').textContent) -
                                                             (parseInt(localStorage.getItem('indent_c1_1') || 0) +
                                                              parseInt(localStorage.getItem('indent_c2_1') || 0) +
                                                              parseInt(localStorage.getItem('indent_c3_1') || 0) +
                                                              parseInt(localStorage.getItem('indent_c4_1') || 0));
            document.getElementById('new_bal_50p').textContent = parseInt(document.getElementById('total50p').textContent) +
                                                               parseInt(document.getElementById('delivery_lb50p').textContent) -
                                                               (parseInt(localStorage.getItem('indent_c1_50p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c2_50p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c3_50p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c4_50p') || 0));
            document.getElementById('new_bal_20p').textContent = parseInt(document.getElementById('total20p').textContent) +
                                                               parseInt(document.getElementById('delivery_lb20p').textContent) -
                                                               (parseInt(localStorage.getItem('indent_c1_20p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c2_20p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c3_20p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c4_20p') || 0));
            document.getElementById('new_bal_10p').textContent = parseInt(document.getElementById('total10p').textContent) +
                                                               parseInt(document.getElementById('delivery_lb10p').textContent) -
                                                               (parseInt(localStorage.getItem('indent_c1_10p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c2_10p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c3_10p') || 0) +
                                                                parseInt(localStorage.getItem('indent_c4_10p') || 0));
            document.getElementById('new_bal_5p').textContent = parseInt(document.getElementById('total5p').textContent) +
                                                              parseInt(document.getElementById('delivery_lb5p').textContent) -
                                                              (parseInt(localStorage.getItem('indent_c1_5p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c2_5p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c3_5p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c4_5p') || 0));
            document.getElementById('new_bal_2p').textContent = parseInt(document.getElementById('total2p').textContent) +
                                                              parseInt(document.getElementById('delivery_lb2p').textContent) -
                                                              (parseInt(localStorage.getItem('indent_c1_2p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c2_2p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c3_2p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c4_2p') || 0));
            document.getElementById('new_bal_1p').textContent = parseInt(document.getElementById('total1p').textContent) +
                                                              parseInt(document.getElementById('delivery_lb1p').textContent) -
                                                              (parseInt(localStorage.getItem('indent_c1_1p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c2_1p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c3_1p') || 0) +
                                                               parseInt(localStorage.getItem('indent_c4_1p') || 0));

            let newGrandTotal = parseInt(document.getElementById('new_bal_20').textContent) +
                               parseInt(document.getElementById('new_bal_10').textContent) +
                               parseInt(document.getElementById('new_bal_5').textContent) +
                               parseInt(document.getElementById('new_bal_2').textContent) +
                               parseInt(document.getElementById('new_bal_1').textContent) +
                               parseInt(document.getElementById('new_bal_50p').textContent) +
                               parseInt(document.getElementById('new_bal_20p').textContent) +
                               parseInt(document.getElementById('new_bal_10p').textContent) +
                               parseInt(document.getElementById('new_bal_5p').textContent) +
                               parseInt(document.getElementById('new_bal_2p').textContent) +
                               parseInt(document.getElementById('new_bal_1p').textContent);
            document.getElementById('newGrandTotal').textContent = newGrandTotal || 0;
        }

        // NEW: Reset Function
        function resetData() {
            // Confirm reset action
            if (!confirm('Are you sure you want to reset all indent and delivery data and update bullion counts? This action cannot be undone.')) {
                return;
            }

            // Clear indent data for all sections
            const indentPrefixes = ['indent_c1', 'indent_c2', 'indent_c3', 'indent_c4'];
            const denominations = ['20', '10', '5', '2', '1', '50p', '20p', '10p', '5p', '2p', '1p'];
            indentPrefixes.forEach(prefix => {
                denominations.forEach(denom => {
                    localStorage.removeItem(`${prefix}_${denom}`);
                });
                localStorage.removeItem(`${prefix}_section`);
            });

            // Clear delivery data
            const deliveryKeys = ['delivery_20', 'delivery_10', 'delivery_5', 'delivery_lb2', 'delivery_lb1', 
                                 'delivery_lb50p', 'delivery_lb20p', 'delivery_lb10p', 'delivery_lb5p', 
                                 'delivery_lb2p', 'delivery_lb1p'];
            deliveryKeys.forEach(key => localStorage.removeItem(key));

            // Calculate new bullion counts from new balance
            const newBalances = {
                '20': parseInt(document.getElementById('new_bal_20').textContent) || 0,
                '10': parseInt(document.getElementById('new_bal_10').textContent) || 0,
                '5': parseInt(document.getElementById('new_bal_5').textContent) || 0,
                '2': parseInt(document.getElementById('new_bal_2').textContent) || 0,
                '1': parseInt(document.getElementById('new_bal_1').textContent) || 0,
                '50p': parseInt(document.getElementById('new_bal_50p').textContent) || 0,
                '20p': parseInt(document.getElementById('new_bal_20p').textContent) || 0,
                '10p': parseInt(document.getElementById('new_bal_10p').textContent) || 0,
                '5p': parseInt(document.getElementById('new_bal_5p').textContent) || 0,
                '2p': parseInt(document.getElementById('new_bal_2p').textContent) || 0,
                '1p': parseInt(document.getElementById('new_bal_1p').textContent) || 0
            };

            // Bag sizes (large and small) for each denomination
            const bagSizes = {
                '2': { large: 500, small: 20 },
                '1': { large: 500, small: 20 },
                '50p': { large: 250, small: 10 },
                '20p': { large: 250, small: 10 },
                '10p': { large: 100, small: 5 },
                '5p': { large: 100, small: 5 },
                '2p': { large: 20, small: 1 },
                '1p': { large: 20, small: 1 }
            };

            // Update bullion counts
            // Notes (£20, £10, £5)
            localStorage.setItem('n20', Math.floor(newBalances['20'] / 20));
            localStorage.setItem('n10', Math.floor(newBalances['10'] / 10));
            localStorage.setItem('n5', Math.floor(newBalances['5'] / 5));

            // Coins
            for (const denom in bagSizes) {
                const total = newBalances[denom];
                const largeBagSize = bagSizes[denom].large;
                const smallBagSize = bagSizes[denom].small;

                const largeBags = Math.floor(total / largeBagSize);
                const remaining = total % largeBagSize;
                const smallBags = Math.floor(remaining / smallBagSize);

                localStorage.setItem(`lb${denom}`, largeBags);
                localStorage.setItem(`sb${denom}`, smallBags);
            }

            // Clear new balance figures
            denominations.forEach(denom => {
                document.getElementById(`new_bal_${denom}`).textContent = 0;
            });
            document.getElementById('newGrandTotal').textContent = 0;

            // Reload data to reflect changes
            loadTotals();
            loadIndents();
            loadDelivery();
            loadNewBalance();
        }

        window.onload = function() {
            loadTotals();
            loadIndents();
            loadDelivery();
            loadNewBalance();
        };
    </script>
</body>
</html>