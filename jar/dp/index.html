<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Jars</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Success Message Overlay -->
    <div class="success-message" id="successMessage"></div>

    <!-- Edit Transaction Modal -->
    <div class="modal-overlay" id="editTransactionModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Fix mistake</div>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <div class="text-muted" id="transactionDate">Date</div>
                    <div style="font-size: 18px; margin: var(--spacing-sm) 0;" id="transactionDescription"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Amount</label>
                    <input type="number" 
                           class="input-text" 
                           id="editAmount" 
                           placeholder="0" 
                           min="0" 
                           step="0.01" 
                           required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="editJar">Jar</label>
                    <select class="select-jar" id="editJar" required>
                        <!-- Jars will be dynamically populated -->
                    </select>
                </div>
                
                <div class="form-group" id="editNoteContainer">
                    <label class="form-label" for="editNote">Note (optional)</label>
                    <input type="text" 
                           class="input-text" 
                           id="editNote" 
                           placeholder="Add a note">
                </div>
                
                <div class="modal-actions">
                    <button class="btn btn-remove" id="removeTransactionBtn">Remove</button>
                    <button class="btn btn-primary" id="saveTransactionBtn">Save changes</button>
                </div>
            </div>
        </div>
    </div>

        <!-- Edit Bill Modal -->
    <div class="modal-overlay" id="editBillModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Fix bill</div>
                <button class="modal-close" id="editBillModalClose">&times;</button>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <div class="text-muted">Bill</div>
                    <div style="font-size: 18px; margin: var(--spacing-sm) 0;" id="editBillNameDisplay"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="editBillName">What is it?</label>
                    <input type="text" 
                           class="input-text" 
                           id="editBillName" 
                           placeholder="e.g., Rent, Electricity" 
                           required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">How often?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="editFrequencyFixed" name="editFrequency" value="fixed" class="radio-input" checked>
                            <label for="editFrequencyFixed" class="radio-label">Every month</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="editFrequencyVariable" name="editFrequency" value="variable" class="radio-input">
                            <label for="editFrequencyVariable" class="radio-label">Changes each month</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="editBillAmount">Amount</label>
                    <input type="number" 
                           class="input-text" 
                           id="editBillAmount" 
                           placeholder="0" 
                           min="0" 
                           step="0.01" 
                           required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="editBillDueDay">Due day</label>
                    <input type="number" 
                           class="input-text" 
                           id="editBillDueDay" 
                           placeholder="1-31" 
                           min="1" 
                           max="31" 
                           required>
                </div>
                
                <div class="modal-actions">
                    <button class="btn btn-remove" id="removeBillBtn">Remove bill</button>
                    <button class="btn btn-primary" id="saveBillChangesBtn">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Home Screen -->
    <div class="screen active" id="homeScreen">
        <div class="container">
            <div class="app-header">
                <h1>Money Jars</h1>
                <div class="header-actions">
                    <div class="month-display" id="currentMonth">This month</div>
                    <button class="btn-link" id="settingsBtn" style="margin-left: var(--spacing-sm);">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
            <div class="card text-center">
                <div class="text-muted">You have</div>
                <div class="large-number" id="totalBalance">0</div>
            </div>

            <div class="status-message" id="statusMessage">
                Everything seems okay.
            </div>

            <div class="nudge-message" id="nudgeMessage" style="display: none;">
                <!-- Nudge messages will appear here -->
            </div>

            <h2>Your Jars</h2>
            <div id="jarsContainer">
                <!-- Jars will be dynamically inserted here -->
            </div>
            <!-- Add this after the jarsContainer div in homeScreen -->
            <div class="mt-md" style="text-align: center;">
                <button class="btn-link" id="resetAppBtn" style="font-size: 14px; color: var(--text-lighter);">
                    Start fresh
                </button>
            </div>
        </div>
    </div>

    <!-- Add Money Screen -->
    <div class="screen" id="addMoneyScreen">
        <div class="container">
            <div class="app-header">
                <h1>Money came in</h1>
            </div>

            <form id="addMoneyForm">
                <div class="form-group">
                    <input type="number" 
                           class="input-amount" 
                           id="addMoneyAmount" 
                           placeholder="0" 
                           min="0" 
                           step="0.01" 
                           required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="addMoneyJar">Where did it go?</label>
                    <select class="select-jar" id="addMoneyJar" required>
                        <!-- Jars will be dynamically populated -->
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="addMoneySource">Where did it come from? (optional)</label>
                    <input type="text" 
                           class="input-text" 
                           id="addMoneySource" 
                           placeholder="e.g., paycheck, gift, found money">
                </div>

                <button type="submit" class="btn btn-primary">Add money</button>
            </form>
        </div>
    </div>

    <!-- Spend Money Screen -->
    <div class="screen" id="spendMoneyScreen">
        <div class="container">
            <div class="app-header">
                <h1>Money went out</h1>
            </div>

            <form id="spendMoneyForm">
                <div class="form-group">
                    <input type="number" 
                           class="input-amount" 
                           id="spendMoneyAmount" 
                           placeholder="0" 
                           min="0" 
                           step="0.01" 
                           required>
                </div>

                <div class="form-group">
                    <label class="form-label">What was it for?</label>
                    <div class="radio-group" id="spendCategoryGroup">
                        <!-- Categories will be dynamically populated -->
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="spendMoneyJar">Which jar?</label>
                    <select class="select-jar" id="spendMoneyJar" required>
                        <!-- Jars will be dynamically populated -->
                    </select>
                </div>

                <button type="submit" class="btn btn-secondary">Done</button>
            </form>
        </div>
    </div>

    <!-- Bills Screen -->
    <div class="screen" id="billsScreen">
        <div class="container">
            <div class="app-header">
                <h1>Bills this month</h1>
                <div class="header-actions">
                    <button class="btn-link" id="viewBillHistoryBtn">Past bills</button>
                </div>
            </div>

            <div class="section-title">Coming up</div>
            <div id="upcomingBills">
                <!-- Upcoming bills will be dynamically inserted here -->
            </div>

            <div class="section-title">Paid</div>
            <div id="paidBills">
                <!-- Paid bills will be dynamically inserted here -->
            </div>

            <button class="btn btn-outline mt-lg" id="addBillBtn">Add a bill</button>
        </div>
    </div>

    <!-- Add/Edit Bill Screen -->
    <div class="screen" id="addBillScreen">
        <div class="container">
            <div class="app-header">
                <h1 id="addBillTitle">Add a bill</h1>
            </div>

            <form id="addBillForm">
                <div class="form-group">
                    <label class="form-label" for="billName">What is it?</label>
                    <input type="text" 
                           class="input-text" 
                           id="billName" 
                           placeholder="e.g., Rent, Electricity, Internet" 
                           required
                           autocomplete="off">
                    <div class="existing-bills" id="existingBillsList">
                        <!-- Existing bills will appear here as user types -->
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">How often?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="frequencyFixed" name="frequency" value="fixed" class="radio-input" checked>
                            <label for="frequencyFixed" class="radio-label">Every month</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="frequencyVariable" name="frequency" value="variable" class="radio-input">
                            <label for="frequencyVariable" class="radio-label">Changes each month</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="billAmount">Amount (fixed)</label>
                    <input type="number" 
                           class="input-text" 
                           id="billAmount" 
                           placeholder="0" 
                           min="0" 
                           step="0.01" 
                           required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="billDueDay">Due day</label>
                    <input type="number" 
                           class="input-text" 
                           id="billDueDay" 
                           placeholder="1-31" 
                           min="1" 
                           max="31" 
                           required>
                </div>

                <button type="submit" class="btn btn-primary" id="saveBillBtn">Save bill</button>
            </form>
        </div>
    </div>

    <!-- Bill History Screen -->
    <div class="screen" id="billHistoryScreen">
        <div class="container">
            <div class="app-header">
                <h1>Past bills</h1>
            </div>

            <div class="text-muted mb-md">
                Showing last 6 months of bill history
            </div>

            <div id="billHistoryContainer">
                <!-- Bill history will be dynamically inserted here -->
            </div>

            <button class="btn btn-outline mt-lg" id="backToBillsBtn">Back to bills</button>
        </div>
    </div>

    <!-- Jar Detail Screen -->
    <div class="screen" id="jarDetailScreen">
        <div class="container">
            <div class="app-header">
                <h1 id="jarDetailName">Jar</h1>
            </div>

            <div class="card text-center">
                <div class="text-muted">You have</div>
                <div class="large-number" id="jarDetailBalance">0</div>
            </div>

            <div class="activity-list" id="jarActivityList">
                <h3>Recent activity</h3>
                <!-- Activity items will be dynamically inserted here -->
            </div>

            <div class="mt-lg">
                <button class="btn btn-primary mb-sm" id="addToJarBtn">Add money</button>
                <button class="btn btn-outline" id="spendFromJarBtn">Spend money</button>
            </div>
        </div>
    </div>

    <!-- All Activity Screen -->
    <div class="screen" id="allActivityScreen">
        <div class="container">
            <div class="app-header">
                <h1>All activity</h1>
            </div>

            <div class="text-muted mb-md">
                Tap any item to fix a mistake
            </div>

            <div id="allActivityContainer">
                <!-- All activity will be dynamically inserted here -->
            </div>

            <button class="btn btn-outline mt-lg" id="backToHomeFromActivityBtn">Back to home</button>
        </div>
    </div>

    <!-- Settings Screen -->
<div class="screen" id="settingsScreen">
    <div class="container">
        <div class="app-header">
            <h1>Settings</h1>
        </div>

        <div class="card">
            <h3>Data management</h3>
            
            <!-- Backup Section (shows when there's data) -->
            <div id="backupSection" style="display: none;">
                <div class="form-group">
                    <p class="text-muted">Save your data to a file</p>
                    <button class="btn btn-outline" id="backupBtn">
                        <i class="fas fa-download"></i> Save to file
                    </button>
                </div>
                
                <div class="text-very-muted mt-sm" style="font-size: 12px;">
                    You can send this file to someone else with the same app version
                </div>
            </div>
            
            <!-- Restore Section (always visible but only works when file selected) -->
            <div class="form-group mt-lg">
                <p class="text-muted">Load data from a file</p>
                <input type="file" id="restoreFile" accept=".json" style="display: none;">
                <button class="btn btn-outline" id="restoreBtn">
                    <i class="fas fa-upload"></i> Load from file
                </button>
            </div>
            
            <div class="text-very-muted mt-sm" style="font-size: 12px;">
                This will replace all your current data
            </div>
        </div>

        <div class="card">
            <h3>App info</h3>
            <div class="text-muted">
                <p>Money Jars v1.0</p>
                <p class="text-very-muted" style="font-size: 14px;">
                    All data stays on your device
                </p>
            </div>
        </div>

        <button class="btn btn-outline mt-lg" id="backToHomeFromSettingsBtn">Back to home</button>
    </div>
</div>
    

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <a href="#" class="nav-item active" data-screen="homeScreen">
            <i class="fas fa-home nav-icon"></i>
            <span>Home</span>
        </a>
        <a href="#" class="nav-item" data-screen="addMoneyScreen">
            <i class="fas fa-plus-circle nav-icon"></i>
            <span>Add</span>
        </a>
        <a href="#" class="nav-item" data-screen="spendMoneyScreen">
            <i class="fas fa-minus-circle nav-icon"></i>
            <span>Spend</span>
        </a>
        <a href="#" class="nav-item" data-screen="billsScreen">
            <i class="fas fa-file-invoice-dollar nav-icon"></i>
            <span>Bills</span>
        </a>
    </div>

    <!-- Quick Action Button -->
    <button class="quick-action" id="viewAllActivityBtn" title="View all activity">
        <i class="fas fa-history"></i>
    </button>

    <script src="app.js"></script>
</body>
</html>